<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆë“± 1í•™ë…„ í•œì 100ê°œ ë§ˆìŠ¤í„°</title>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.0.0/dist/hanzi-writer.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        :root { --primary: #FF7F50; --secondary: #FFD700; --bg: #FDFCF0; --point-blue: #2196F3; }
        body { font-family: 'Jua', sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: #333; }
        header { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid var(--secondary); position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 1.8rem; color: var(--primary); cursor: pointer; }
        .nav-menu button { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer; font-family: 'Jua'; margin-left: 5px; }
        .page { display: none; padding: 20px; max-width: 800px; margin: auto; }
        .active { display: block; }
        .card { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); margin-bottom: 25px; text-align: center; }
        .section-title { border-left: 5px solid var(--primary); padding-left: 10px; margin-top: 30px; text-align: left; }
        .step-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: #fff; padding: 10px 20px; border-radius: 50px; }
        .btn-step { background: var(--primary); color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-family: 'Jua'; }
        .writer-flex { display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
        .char-box { border: 2px solid #ddd; border-radius: 15px; background: white; padding: 10px; width: 110px; height: 110px; display: flex; align-items: center; justify-content: center; }
        .quiz-option { display: block; width: 100%; padding: 15px; margin: 10px 0; background: white; border: 2px solid #eee; border-radius: 15px; font-family: 'Jua'; font-size: 1.2rem; cursor: pointer; }
        .feedback-msg { height: 35px; font-size: 1.3rem; font-weight: bold; margin-bottom: 10px; }
        .btn-action { background: #4CAF50; color: white; border: none; padding: 12px 25px; border-radius: 15px; font-size: 1.1rem; cursor: pointer; font-family: 'Jua'; margin: 5px; }
        .progress-container { width: 100%; background-color: #eee; border-radius: 10px; margin-bottom: 10px; height: 8px; }
        .progress-fill { height: 100%; background-color: var(--point-blue); border-radius: 10px; width: 0%; transition: 0.3s; }
        .breakdown-table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #fff; }
        .breakdown-table td { border: 1px solid #eee; padding: 15px; text-align: left; }
        .hanja-display { font-size: 2.2rem; color: var(--primary); text-align: center; width: 70px; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">ğŸŒŸ 1í•™ë…„ í•œì 100</div>
    <div class="nav-menu">
        <button onclick="showPage('page1')">í•™ìŠµí•˜ê¸°</button>
        <button onclick="showPage('page2')">ì§ì ‘ì¨ë³´ê¸°</button>
    </div>
</header>

<div id="page1" class="page active">
    <div id="study-box">
        <div class="progress-container"><div id="main-progress" class="progress-fill"></div></div>
        <div class="step-bar">
            <button id="prev-btn" class="btn-step" onclick="changeWord(-1)">â—€ ì´ì „</button>
            <span id="progress-text">1 / 100</span>
            <button id="next-btn" class="btn-step" onclick="changeWord(1)">ë‹¤ìŒ â–¶</button>
        </div>
        
        <div class="card">
            <button class="btn-action" style="background:#9C27B0;" id="btn-speak-top">ğŸ”Š ì†Œë¦¬ ë“£ê¸°</button>
            <h1 id="main-word" style="color:var(--point-blue); font-size: 2.8rem; margin: 10px 0;"></h1>
            <p id="main-desc" style="font-size:1.3rem; color:#666; padding:0 10px;"></p>
            
            <h3 class="section-title">â‘  í•œì ëœ»í’€ì´</h3>
            <table class="breakdown-table" id="breakdown-content"></table>

            <h3 class="section-title">â‘¡ íšìˆœ ë³´ê¸°</h3>
            <div id="writers-container" class="writer-flex"></div>
            <button class="btn-action" style="background:#2196F3;" onclick="playSequence()">ë‹¤ì‹œ ë³´ê¸°</button>

            <h3 class="section-title">â‘¢ í€´ì¦ˆ</h3>
            <div id="quiz-feedback" class="feedback-msg"></div>
            <div id="quiz-content"></div>
        </div>
    </div>
</div>

<div id="page2" class="page">
    <div class="card">
        <h2>âœï¸ ì§ì ‘ ì¨ë³´ê¸°</h2>
        <div id="target-draw" class="char-box" style="width:240px; height:240px; margin: auto;"></div>
        <p id="quiz-guide" style="font-size:1.5rem; color:var(--primary); margin: 20px 0;">ê¸€ìë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
        <div id="draw-buttons"></div>
    </div>
</div>

<script>
    const hanjaList = [
        { word: 'ì¼ì¼', hanja: 'ä¸€æ—¥', desc: 'í•˜ë£¨', break: ['í•œ ì¼', 'ë‚  ì¼'] },
        { word: 'ì´ë“±', hanja: 'äºŒë“±', desc: 'ë‘˜ì§¸', break: ['ë‘ ì´'] },
        { word: 'ì‚¼ì›”', hanja: 'ä¸‰æœˆ', desc: '3ì›”', break: ['ì„ ì‚¼', 'ë‹¬ ì›”'] },
        { word: 'ì‚¬ë°©', hanja: 'å››æ–¹', desc: 'ë„¤ ë°©í–¥', break: ['ë„‰ ì‚¬', 'ëª¨ ë°©'] },
        { word: 'ì˜¤ì›”', hanja: 'äº”æœˆ', desc: '5ì›”', break: ['ë‹¤ì„¯ ì˜¤', 'ë‹¬ ì›”'] },
        { word: 'ìœ¡ì›”', hanja: 'å…­æœˆ', desc: '6ì›”', break: ['ì—¬ì„¯ ìœ¡', 'ë‹¬ ì›”'] },
        { word: 'ì¹ ì¼', hanja: 'ä¸ƒæ—¥', desc: '7ì¼ ë™ì•ˆ', break: ['ì¼ê³± ì¹ ', 'ë‚  ì¼'] },
        { word: 'íŒ”ë°©', hanja: 'å…«æ–¹', desc: 'ëª¨ë“  ë°©í–¥', break: ['ì—¬ëŸ íŒ”', 'ëª¨ ë°©'] },
        { word: 'êµ¬ì‹­', hanja: 'ä¹å', desc: '90', break: ['ì•„í™‰ êµ¬', 'ì—´ ì‹­'] },
        { word: 'ì‹œì›”', hanja: 'åæœˆ', desc: '10ì›”', break: ['ì—´ ì‹­', 'ë‹¬ ì›”'] },
        { word: 'ë°±ì¸', hanja: 'ç™¾äºº', desc: 'ë°± ëª…ì˜ ì‚¬ëŒ', break: ['ì¼ë°± ë°±', 'ì‚¬ëŒ ì¸'] },
        { word: 'ì²œê¸ˆ', hanja: 'åƒé‡‘', desc: 'ë§ì€ ëˆ', break: ['ì¼ì²œ ì²œ', 'ì‡  ê¸ˆ'] },
        { word: 'ë§Œì¼', hanja: 'è¬ä¸€', desc: 'ë§Œì•½ì—', break: ['ì¼ë§Œ ë§Œ', 'í•œ ì¼'] },
        { word: 'ì‚°ì²œ', hanja: 'å±±å·', desc: 'ì‚°ê³¼ ì‹œë‚´', break: ['ì‚° ì‚°', 'ì‹œë‚´ ì²œ'] },
        { word: 'ê°•ì‚°', hanja: 'æ±Ÿå±±', desc: 'ê°•ê³¼ ì‚°', break: ['ê°• ê°•', 'ì‚° ì‚°'] },
        { word: 'í™”ì‚°', hanja: 'ç«å±±', desc: 'ë¶ˆ ë¿œëŠ” ì‚°', break: ['ë¶ˆ í™”', 'ì‚° ì‚°'] },
        { word: 'ì„ì‚°', hanja: 'çŸ³å±±', desc: 'ëŒì‚°', break: ['ëŒ ì„', 'ì‚° ì‚°'] },
        { word: 'í† ëª©', hanja: 'åœŸæœ¨', desc: 'í™ê³¼ ë‚˜ë¬´', break: ['í™ í† ', 'ë‚˜ë¬´ ëª©'] },
        { word: 'ëª©ìˆ˜', hanja: 'æœ¨æ‰‹', desc: 'ë‚˜ë¬´ ë‹¤ë£¨ëŠ” ì‚¬ëŒ', break: ['ë‚˜ë¬´ ëª©', 'ì† ìˆ˜'] },
        { word: 'ìƒì', hanja: 'ç”Ÿå­', desc: 'ì•„ë“¤ì„ ë‚³ìŒ', break: ['ë‚  ìƒ', 'ì•„ë“¤ ì'] },
        { word: 'ìˆ˜ë ¥', hanja: 'æ°´åŠ›', desc: 'ë¬¼ì˜ í˜', break: ['ë¬¼ ìˆ˜', 'í˜ ë ¥'] },
        { word: 'í™”ë ¥', hanja: 'ç«åŠ›', desc: 'ë¶ˆì˜ í˜', break: ['ë¶ˆ í™”', 'í˜ ë ¥'] },
        { word: 'ëŒ€ë ¥', hanja: 'å¤§åŠ›', desc: 'í° í˜', break: ['í´ ëŒ€', 'í˜ ë ¥'] },
        { word: 'ìˆ˜ì°¨', hanja: 'æ°´è»Š', desc: 'ë¬¼ë ˆë°©ì•„', break: ['ë¬¼ ìˆ˜', 'ìˆ˜ë ˆ ì°¨'] },
        { word: 'ì¼ì›”', hanja: 'æ—¥æœˆ', desc: 'í•´ì™€ ë‹¬', break: ['ë‚  ì¼', 'ë‹¬ ì›”'] },
        { word: 'í‰ì¼', hanja: 'å¹³æ—¥', desc: 'ë³´í†µ ë•Œì˜ ë‚ ', break: ['í‰í‰í•  í‰', 'ë‚  ì¼'] },
        { word: 'íœ´ì¼', hanja: 'ä¼‘æ—¥', desc: 'ì‰¬ëŠ” ë‚ ', break: ['ì‰´ íœ´', 'ë‚  ì¼'] },
        { word: 'ì›”ì¶œ', hanja: 'æœˆå‡º', desc: 'ë‹¬ì´ ëœ¸', break: ['ë‹¬ ì›”', 'ë‚  ì¶œ'] },
        { word: 'ëŒ€ì†Œ', hanja: 'å¤§å°', desc: 'í¬ê³  ì‘ìŒ', break: ['í´ ëŒ€', 'ì‘ì„ ì†Œ'] },
        { word: 'ìƒí•˜', hanja: 'ä¸Šä¸‹', desc: 'ìœ„ì™€ ì•„ë˜', break: ['ìœ„ ìƒ', 'ì•„ë˜ í•˜'] },
        { word: 'ì¢Œìš°', hanja: 'å·¦å³', desc: 'ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½', break: ['ì™¼ ì¢Œ', 'ì˜¤ë¥¸ ìš°'] },
        { word: 'ë™ì„œ', hanja: 'æ±è¥¿', desc: 'ë™ìª½ê³¼ ì„œìª½', break: ['ë™ë…˜ ë™', 'ì„œë…˜ ì„œ'] },
        { word: 'ë‚¨ë¶', hanja: 'å—åŒ—', desc: 'ë‚¨ìª½ê³¼ ë¶ìª½', break: ['ë‚¨ë…˜ ë‚¨', 'ë¶ë…˜ ë¶'] },
        { word: 'ì¥ë‹¨', hanja: 'é•·çŸ­', desc: 'ê¸¸ê³  ì§§ìŒ', break: ['ê¸¸ ì¥', 'ì§§ì„ ë‹¨'] },
        { word: 'ë‹¤ì†Œ', hanja: 'å¤šå°‘', desc: 'ë§ê³  ì ìŒ', break: ['ë§ì„ ë‹¤', 'ì ì„ ì†Œ'] },
        { word: 'ê³ ì €', hanja: 'é«˜ä½', desc: 'ë†’ê³  ë‚®ìŒ', break: ['ë†’ì„ ê³ ', 'ë‚®ì„ ì €'] },
        { word: 'ë‚´ì™¸', hanja: 'å…§å¤–', desc: 'ì•ˆê³¼ ë°–', break: ['ì•ˆ ë‚´', 'ë°”ê¹¥ ì™¸'] },
        { word: 'ì „í›„', hanja: 'å‰å¾Œ', desc: 'ì•ê³¼ ë’¤', break: ['ì• ì „', 'ë’¤ í›„'] },
        { word: 'ì¤‘ê°„', hanja: 'ä¸­é–“', desc: 'ì‚¬ì´', break: ['ê°€ìš´ë° ì¤‘', 'ì‚¬ì´ ê°„'] },
        { word: 'ì¤‘ì•™', hanja: 'ä¸­å¤®', desc: 'í•œê°€ìš´ë°', break: ['ê°€ìš´ë° ì¤‘', 'ê°€ìš´ë° ì•™'] },
        { word: 'ì²œì§€', hanja: 'å¤©åœ°', desc: 'í•˜ëŠ˜ê³¼ ë•…', break: ['í•˜ëŠ˜ ì²œ', 'ë•… ì§€'] },
        { word: 'ì²œí•˜', hanja: 'å¤©ä¸‹', desc: 'ì˜¨ ì„¸ìƒ', break: ['í•˜ëŠ˜ ì²œ', 'ì•„ë˜ í•˜'] },
        { word: 'ë°±ìˆ˜', hanja: 'ç™½æ‰‹', desc: 'ë¹ˆì†', break: ['í° ë°±', 'ì† ìˆ˜'] },
        { word: 'ë°±ë¯¸', hanja: 'ç™½ç±³', desc: 'í° ìŒ€', break: ['í° ë°±', 'ìŒ€ ë¯¸'] },
        { word: 'ì í† ', hanja: 'èµ¤åœŸ', desc: 'ë¶‰ì€ í™', break: ['ë¶‰ì„ ì ', 'í™ í† '] },
        { word: 'ê¸ˆì„', hanja: 'é‡‘çŸ³', desc: 'ì‡ ì™€ ëŒ', break: ['ì‡  ê¸ˆ', 'ëŒ ì„'] },
        { word: 'ì¤‘ë…„', hanja: 'ä¸­å¹´', desc: 'ì¤‘ë…„', break: ['ê°€ìš´ë° ì¤‘', 'í•´ ë…„'] },
        { word: 'ì†Œë…„', hanja: 'å°‘å¹´', desc: 'ì Šì€ì´', break: ['ì ì„ ì†Œ', 'í•´ ë…„'] },
        { word: 'ê¸ˆë…„', hanja: 'ä»Šå¹´', desc: 'ì˜¬í•´', break: ['ì´ì œ ê¸ˆ', 'í•´ ë…„'] },
        { word: 'ë°˜ë…„', hanja: 'åŠå¹´', desc: 'ë°˜ë…„', break: ['ë°˜ ë°˜', 'í•´ ë…„'] },
        { word: 'ì¸êµ¬', hanja: 'äººå£', desc: 'ì‚¬ëŒì˜ ìˆ˜', break: ['ì‚¬ëŒ ì¸', 'ì… êµ¬'] },
        { word: 'ì£¼ì¸', hanja: 'ä¸»äºº', desc: 'ë¬¼ê±´ì˜ ì„ì', break: ['ì„ê¸ˆ ì£¼', 'ì‚¬ëŒ ì¸'] },
        { word: 'ë³¸ì¸', hanja: 'æœ¬äºº', desc: 'ìê¸° ìì‹ ', break: ['ê·¼ë³¸ ë³¸', 'ì‚¬ëŒ ì¸'] },
        { word: 'ë¶€ì¸', hanja: 'å¤«äºº', desc: 'ë‚¨ì˜ ì•„ë‚´', break: ['ì‚¬ë‚´ ë¶€', 'ì‚¬ëŒ ì¸'] },
        { word: 'ëª…ìˆ˜', hanja: 'åæ‰‹', desc: 'ì†œì”¨ ì¢‹ì€ ì‚¬ëŒ', break: ['ì´ë¦„ ëª…', 'ì† ìˆ˜'] },
        { word: 'ìˆ˜ì¡±', hanja: 'æ‰‹è¶³', desc: 'ì†ê³¼ ë°œ', break: ['ì† ìˆ˜', 'ë°œ ì¡±'] },
        { word: 'ì…êµ¬', hanja: 'å…¥å£', desc: 'ë“¤ì–´ê°€ëŠ” ê³³', break: ['ë“¤ ì…', 'ì… êµ¬'] },
        { word: 'ì¶œêµ¬', hanja: 'å‡ºå£', desc: 'ë‚˜ê°€ëŠ” ê³³', break: ['ë‚  ì¶œ', 'ì… êµ¬'] },
        { word: 'ì…ì‚°', hanja: 'å…¥å±±', desc: 'ì‚°ì— ë“¤ì–´ê°', break: ['ë“¤ ì…', 'ì‚° ì‚°'] },
        { word: 'í•˜ì‚°', hanja: 'ä¸‹å±±', desc: 'ì‚°ì—ì„œ ë‚´ë ¤ì˜´', break: ['ì•„ë˜ í•˜', 'ì‚° ì‚°'] },
        { word: 'ì§€ìƒ', hanja: 'åœ°ä¸Š', desc: 'ë•… ìœ„', break: ['ë•… ì§€', 'ìœ„ ìƒ'] },
        { word: 'ì§€í•˜', hanja: 'åœ°ä¸‹', desc: 'ë•… ì•„ë˜', break: ['ë•… ì§€', 'ì•„ë˜ í•˜'] },
        { word: 'ìˆ˜ì¤‘', hanja: 'æ°´ä¸­', desc: 'ë¬¼ì†', break: ['ë¬¼ ìˆ˜', 'ê°€ìš´ë° ì¤‘'] },
        { word: 'ì‹¬ì¤‘', hanja: 'å¿ƒä¸­', desc: 'ë§ˆìŒì†', break: ['ë§ˆìŒ ì‹¬', 'ê°€ìš´ë° ì¤‘'] },
        { word: 'ëŒ€ë¬¸', hanja: 'å¤§é–€', desc: 'í° ë¬¸', break: ['í´ ëŒ€', 'ë¬¸ ë¬¸'] },
        { word: 'êµë¬¸', hanja: 'æ ¡é–€', desc: 'í•™êµ ë¬¸', break: ['í•™êµ êµ', 'ë¬¸ ë¬¸'] },
        { word: 'ì†Œë¬¸', hanja: 'å°é–€', desc: 'ì‘ì€ ë¬¸', break: ['ì‘ì„ ì†Œ', 'ë¬¸ ë¬¸'] },
        { word: 'ëª…ë¬¸', hanja: 'åé–€', desc: 'ì´ë¦„ë‚œ ì§‘ì•ˆ', break: ['ì´ë¦„ ëª…', 'ë¬¸ ë¬¸'] },
        { word: 'ì„ ìƒ', hanja: 'å…ˆç”Ÿ', desc: 'ë¨¼ì € íƒœì–´ë‚œ ë¶„', break: ['ë¨¼ì € ì„ ', 'ë‚  ìƒ'] },
        { word: 'í•™ìƒ', hanja: 'å­¸ç”Ÿ', desc: 'ë°°ìš°ëŠ” ì‚¬ëŒ', break: ['ë°°ìš¸ í•™', 'ë‚  ìƒ'] },
        { word: 'ìƒì¼', hanja: 'ç”Ÿæ—¥', desc: 'íƒœì–´ë‚œ ë‚ ', break: ['ë‚  ìƒ', 'ë‚  ì¼'] },
        { word: 'ì¸ìƒ', hanja: 'äººç”Ÿ', desc: 'ì‚¬ëŒì˜ ì‚¶', break: ['ì‚¬ëŒ ì¸', 'ë‚  ìƒ'] },
        { word: 'ì—¬ì', hanja: 'å¥³å­', desc: 'ì—¬ì„±', break: ['ê³„ì§‘ ë…€', 'ì•„ë“¤ ì'] },
        { word: 'ë‚¨ì', hanja: 'ç”·å­', desc: 'ë‚¨ì„±', break: ['ì‚¬ë‚´ ë‚¨', 'ì•„ë“¤ ì'] },
        { word: 'ì™•ì', hanja: 'ç‹å­', desc: 'ì„ê¸ˆì˜ ì•„ë“¤', break: ['ì„ê¸ˆ ì™•', 'ì•„ë“¤ ì'] },
        { word: 'ë¶€ì', hanja: 'çˆ¶å­', desc: 'ì•„ë²„ì§€ì™€ ì•„ë“¤', break: ['ì•„ë²„ì§€ ë¶€', 'ì•„ë“¤ ì'] },
        { word: 'ë¶€ëª¨', hanja: 'çˆ¶æ¯', desc: 'ì•„ë²„ì§€ì™€ ì–´ë¨¸ë‹ˆ', break: ['ì•„ë²„ì§€ ë¶€', 'ì–´ë¨¸ë‹ˆ ëª¨'] },
        { word: 'í˜•ì œ', hanja: 'å…„å¼Ÿ', desc: 'í˜•ê³¼ ë‚¨ë™ìƒ', break: ['ë§ í˜•', 'ì•„ìš° ì œ'] },
        { word: 'ì™•ì‹¤', hanja: 'ç‹å®¤', desc: 'ì„ê¸ˆì˜ ê°€ì¡±', break: ['ì„ê¸ˆ ì™•', 'ì§‘ ì‹¤'] },
        { word: 'ë°±ì„±', hanja: 'ç™¾å§“', desc: 'ë‚˜ë¼ì˜ êµ­ë¯¼', break: ['ì¼ë°± ë°±', 'ì„± ì„±'] },
        { word: 'ë§Œì„¸', hanja: 'è¬æ­²', desc: 'ê¸°ìœ ì™¸ì¹¨', break: ['ì¼ë§Œ ë§Œ', 'í•´ ì„¸'] },
        { word: 'ë°±ìš´', hanja: 'ç™½é›²', desc: 'í° êµ¬ë¦„', break: ['í° ë°±', 'êµ¬ë¦„ ìš´'] },
        { word: 'ì²­ì‚°', hanja: 'é‘å±±', desc: 'í‘¸ë¥¸ ì‚°', break: ['í‘¸ë¥¼ ì²­', 'ì‚° ì‚°'] },
        { word: 'ì²­ì²œ', hanja: 'é‘å¤©', desc: 'í‘¸ë¥¸ í•˜ëŠ˜', break: ['í‘¸ë¥¼ ì²­', 'í•˜ëŠ˜ ì²œ'] },
        { word: 'ë…¹ì§€', hanja: 'ç¶ åœ°', desc: 'í’€ì´ ìš°ê±°ì§„ ê³³', break: ['í‘¸ë¥¼ ë¡', 'ë•… ì§€'] },
        { word: 'í† ì§€', hanja: 'åœŸåœ°', desc: 'ë•…', break: ['í™ í† ', 'ë•… ì§€'] },
        { word: 'ë§Œë¬¼', hanja: 'è¬ç‰©', desc: 'ëª¨ë“  ë¬¼ê±´', break: ['ì¼ë§Œ ë§Œ', 'ë¬¼ê±´ ë¬¼'] },
        { word: 'ìƒê¸°', hanja: 'ç”Ÿæ°£', desc: 'ì‚´ì•„ ìˆëŠ” ê¸°ìš´', break: ['ë‚  ìƒ', 'ê¸°ìš´ ê¸°'] },
        { word: 'ì†Œì¸', hanja: 'å°äºº', desc: 'ì‘ì€ ì‚¬ëŒ', break: ['ì‘ì„ ì†Œ', 'ì‚¬ëŒ ì¸'] },
        { word: 'ëŒ€ì¸', hanja: 'å¤§äºº', desc: 'í° ì‚¬ëŒ', break: ['í´ ëŒ€', 'ì‚¬ëŒ ì¸'] },
        { word: 'ëª…ì¸', hanja: 'åäºº', desc: 'ì´ë¦„ë‚œ ì‚¬ëŒ', break: ['ì´ë¦„ ëª…', 'ì‚¬ëŒ ì¸'] },
        { word: 'ë…¸ì¸', hanja: 'è€äºº', desc: 'ëŠ™ì€ ì‚¬ëŒ', break: ['ëŠ™ì„ ë¡œ', 'ì‚¬ëŒ ì¸'] },
        { word: 'ì¥ë‚¨', hanja: 'é•·ç”·', desc: 'ì²«ì§¸ ì•„ë“¤', break: ['ê¸¸ ì¥', 'ì‚¬ë‚´ ë‚¨'] },
        { word: 'ì¥ë…€', hanja: 'é•·å¥³', desc: 'ì²«ì§¸ ë”¸', break: ['ê¸¸ ì¥', 'ê³„ì§‘ ë…€'] },
        { word: 'ìì‹', hanja: 'å­æ¯', desc: 'ì•„ë“¤ê³¼ ë”¸', break: ['ì•„ë“¤ ì', 'ì‰´ ì‹'] },
        { word: 'ë¶„ë¶„', hanja: 'åˆ†åˆ†', desc: 'ì—¬ëŸ¿ìœ¼ë¡œ ë‚˜ë‰¨', break: ['ë‚˜ëˆŒ ë¶„', 'ë‚˜ëˆŒ ë¶„'] },
        { word: 'ì •ì›”', hanja: 'æ­£æœˆ', desc: 'ì²«ì§¸ ë‹¬', break: ['ë°”ë¥¼ ì •', 'ë‹¬ ì›”'] },
        { word: 'ì •ì§', hanja: 'æ­£ç›´', desc: 'ë°”ë¥´ê³  ê³§ìŒ', break: ['ë°”ë¥¼ ì •', 'ê³§ì„ ì§'] },
        { word: 'ì•ˆì‹¬', hanja: 'å®‰å¿ƒ', desc: 'ë§ˆìŒì„ í¸íˆ í•¨', break: ['í¸ì•ˆ ì•ˆ', 'ë§ˆìŒ ì‹¬'] },
        { word: 'ì¼ì‹¬', hanja: 'ä¸€å¿ƒ', desc: 'í•œë§ˆìŒ', break: ['í•œ ì¼', 'ë§ˆìŒ ì‹¬'] }
    ];

    let currentIndex = 0;
    let writers = [];

    window.onload = () => { loadWord(0); };

    function speak(text) {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ko-KR';
        utterance.rate = 1.0;
        window.speechSynthesis.speak(utterance);
    }

    function loadWord(idx) {
        currentIndex = idx;
        const data = hanjaList[idx];
        
        document.getElementById('main-word').innerText = `${data.word} (${data.hanja})`;
        document.getElementById('main-desc').innerText = `"${data.desc}"`;
        document.getElementById('progress-text').innerText = `${idx + 1} / ${hanjaList.length}`;
        document.getElementById('main-progress').style.width = ((idx + 1) / hanjaList.length * 100) + "%";
        document.getElementById('btn-speak-top').onclick = () => speak(`${data.word}. ${data.desc}`);

        let tableHtml = '';
        [...data.hanja].forEach((char, i) => {
            if (char.match(/[ä¸€-é¾¥]/)) { // í•œìë§Œ í‘œì‹œ
                tableHtml += `<tr><td class="hanja-display">${char}</td><td><strong>${data.break[i] || 'ëœ»í’€ì´ ì¤€ë¹„ì¤‘'}</strong></td></tr>`;
            }
        });
        document.getElementById('breakdown-content').innerHTML = tableHtml;

        const container = document.getElementById('writers-container');
        container.innerHTML = '';
        writers = [];

        [...data.hanja].forEach((char, i) => {
            if (!char.match(/[ä¸€-é¾¥]/)) return;
            const div = document.createElement('div');
            div.id = `view-char-${i}`;
            div.className = 'char-box';
            container.appendChild(div);
            
            const writer = HanziWriter.create(div.id, char, {
                width: 100, height: 100, padding: 5, strokeColor: i % 2 === 0 ? '#FF7F50' : '#2196F3'
            });
            writers.push(writer);
        });

        setTimeout(() => playSequence(), 500);

        const quizBox = document.getElementById('quiz-content');
        const feedback = document.getElementById('quiz-feedback');
        feedback.innerText = "";
        
        const wrongIdx = (idx + 7) % hanjaList.length;
        const options = [data.hanja, hanjaList[wrongIdx].hanja].sort(() => Math.random() - 0.5);
        
        quizBox.innerHTML = `<p>Q. "${data.word}"ì— ì•Œë§ì€ í•œìëŠ”?</p>`;
        options.forEach(opt => {
            quizBox.innerHTML += `<button class="quiz-option" onclick="checkQuiz(this, '${opt}' === '${data.hanja}')">${opt}</button>`;
        });

        let btns = '';
        [...data.hanja].forEach(c => {
            if (c.match(/[ä¸€-é¾¥]/)) btns += `<button class="btn-action" onclick="startDraw('${c}')">${c} ì“°ê¸°</button>`;
        });
        document.getElementById('draw-buttons').innerHTML = btns;
    }

    async function playSequence() {
        for (let writer of writers) { writer.hideCharacter(); }
        for (let writer of writers) {
            await new Promise(resolve => writer.animateCharacter({ onComplete: resolve }));
        }
    }

    function checkQuiz(btn, isCorrect) {
        const feedback = document.getElementById('quiz-feedback');
        if(isCorrect) {
            feedback.style.color = "#4CAF50";
            feedback.innerText = "ì •ë‹µì…ë‹ˆë‹¤! ğŸŒŸ";
            btn.style.background = "#c8e6c9";
            speak("ì •ë‹µì…ë‹ˆë‹¤!");
        } else {
            feedback.style.color = "#f44336";
            feedback.innerText = "ë‹¤ì‹œ í•´ë³´ì„¸ìš”! ğŸ¥";
            btn.style.background = "#ffcdd2";
            speak("ë‹¤ì‹œ í•´ë³´ì„¸ìš”.");
            setTimeout(() => {
                btn.style.background = "white";
                feedback.innerText = "";
            }, 1000);
        }
    }

    function startDraw(char) {
        showPage('page2');
        document.getElementById('target-draw').innerHTML = '';
        document.getElementById('quiz-guide').innerText = `"${char}"ë¥¼ ì¨ë³´ì„¸ìš”!`;
        let dw = HanziWriter.create('target-draw', char, { width: 240, height: 240, showCharacter: false, showHintAfterMisses: 1 });
        dw.quiz({ onComplete: () => { 
            speak("ì°¸ ì˜í–ˆì–´ìš”!");
            alert("ì™„ë²½í•´ìš”! âœ¨"); 
        }});
    }

    function changeWord(n) {
        const next = currentIndex + n;
        if(next >= 0 && next < hanjaList.length) loadWord(next);
    }

    function showPage(pId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pId).classList.add('active');
    }
</script>
</body>
</html>
